"""
ì£¼ì œë³„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ - ëª¨ë“ˆí˜• êµ¬ì¡°
"""

from typing import Dict, List


class PromptGenerator:
    """
    ë‹¨ìˆœí™”ëœ ëª¨ë“ˆí˜• í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°
    
    êµ¬ì¡°:
    - BASE í…œí”Œë¦¿ 3ê°œ (Overview, Detail-Dialogue, Detail-Presentation)
    - ì£¼ì œë³„ ì—­í• (Role)ë§Œ ë³€ê²½
    - í…œí”Œë¦¿ì— {role}, {transcript} ë³€ìˆ˜ë§Œ ì‚½ì…
    """

    def __init__(self):
        # ê³µí†µ ì—­í•  ì •ì˜ (ëª¨ë“  í”„ë¡¬í”„íŠ¸ì— ì ìš©)
        self.base_role = """ë‹¹ì‹ ì€ C-Level ì„ì›ê³¼ ì „ë¬¸ íˆ¬ììë¥¼ ìœ„í•´ ê¸°ìˆ Â·ë¹„ì¦ˆë‹ˆìŠ¤ ì¸í„°ë·° ë° ë°œí‘œ ì˜ìƒì„ ë¶„ì„í•˜ëŠ”
'ìˆ˜ì„ ì¸í…”ë¦¬ì „ìŠ¤ ë¶„ì„ê°€(Senior Intelligence Analyst)'ì…ë‹ˆë‹¤.

ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” êµ¬ì–´ì²´ ì¤‘ì‹¬ì˜ ë°©ëŒ€í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼
âŒ ìš”ì•½í•˜ê±°ë‚˜ í•´ì„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
âœ… ì˜ìƒ ë‚´ë¶€ì˜ ë…¼ë¦¬ êµ¬ì¡°, ì£¼ì¥, ê·¼ê±°, ë””í…Œì¼ì„ ìµœëŒ€í•œ ë³´ì¡´í•œ ìƒíƒœë¡œ
'êµ¬ì¡°í™”ëœ ì‹¬ì¸µ ë¶„ì„ ë¦¬í¬íŠ¸'ë¡œ ì¬êµ¬ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤."""

        # ì£¼ì œë³„ ì „ë¬¸ ë¶„ì•¼ (specialty)
        self.specialty_roles = {
            "general": "ë²”ìš© ì½˜í…ì¸  ë¶„ì„ ì „ë¬¸",
            "default": "ë²”ìš© ì½˜í…ì¸  ë¶„ì„ ì „ë¬¸",
            "tech": "ìµœì‹  ê¸°ìˆ  íŠ¸ë Œë“œì™€ ì—”ì§€ë‹ˆì–´ë§ ë¬¸ë§¥ ì „ë¬¸",
            "business": "ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëµê³¼ ì‹œì¥ ë™í–¥ ë¶„ì„ ì „ë¬¸",
            "ai": "AI/ML ë¶„ì•¼ì˜ ê¸°ìˆ ì  ê¹Šì´ì™€ ì‹¤ìš©ì  ì‘ìš© ì „ë¬¸",
            "economy": "ê²½ì œ í˜„ìƒê³¼ ê¸ˆìœµ ì‹œì¥ ë¶„ì„ ì „ë¬¸",
            "politics": "ì •ì¹˜Â·ì‚¬íšŒ ì´ìŠˆì˜ ê°ê´€ì  ë¶„ì„ ì „ë¬¸",
            "daily": "ì¼ìƒ ì»¨í…ì¸ ì˜ í•µì‹¬ í¬ì¸íŠ¸ í¬ì°© ì „ë¬¸"
        }

    # ê¸°ë³¸ Overview í”„ë¡¬í”„íŠ¸ (ëª¨ë“  ê²½ìš°ì— ë™ì¼)
    BASE_OVERVIEW = """[ROLE]
{role}

[INPUT]
ì•„ë˜ì—ëŠ” ì˜ìƒ ì½˜í…ì¸ ì˜ ì›ë¬¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ì œê³µë©ë‹ˆë‹¤.
(ëŒ€ë‹´, ì¸í„°ë·°, íŒ¨ë„ í† ë¡ , Q&A, ê°•ì—°, ë°œí‘œ, ì„¸ë¯¸ë‚˜ ë“±)

[OBJECTIVE]
ì´ ìŠ¤í¬ë¦½íŠ¸ì˜ í•µì‹¬ ë‚´ìš©ê³¼ ì¸ì‚¬ì´íŠ¸ë¥¼ 8ì¤„ ì´ë‚´ë¡œ ìš”ì•½í•˜ì‹œì˜¤.
ë…ìê°€ ì–»ì–´ê°ˆ ìˆ˜ ìˆëŠ” ì •ë³´, í†µì°°, ì´ ì»¨í…ì¸ ë§Œì˜ ì°¨ë³„í™”ëœ ë‚´ìš©ì´ë‚˜ ê´€ì ì„ í¬í•¨í•˜ì‹­ì‹œì˜¤.

[LANGUAGE REQUIREMENT]
- ëª¨ë“  ì¶œë ¥ì€ **í•œêµ­ì–´ë¡œë§Œ** ì‘ì„±í•˜ì‹­ì‹œì˜¤
- ì „ë¬¸ ìš©ì–´ë‚˜ ê³ ìœ ëª…ì‚¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì˜ì–´ ì‚¬ìš©ì„ ì§€ì–‘í•˜ì‹­ì‹œì˜¤

==========
[TARGET SCRIPT]
{transcript}"""

    # ëŒ€í™”í˜• Detail í”„ë¡¬í”„íŠ¸
    BASE_DETAIL_DIALOGUE = """[ROLE]
{role}

[INPUT DATA]
- ë¶„ì„ ëŒ€ìƒ: ì œê³µëœ ëŒ€ë‹´ / ì¸í„°ë·° / ë°œí‘œ ìŠ¤í¬ë¦½íŠ¸
- ëª©í‘œ: ë…ìê°€ ì˜ìƒì„ ì‹œì²­í•˜ì§€ ì•Šì•„ë„
        â–¸ ëˆ„ê°€
        â–¸ ì–´ë–¤ ì£¼ì œë¥¼
        â–¸ ì–´ë–¤ ë…¼ë¦¬ì™€ ê·¼ê±°ë¡œ
        â–¸ ì–´ë–¤ ìˆ˜ì¤€ì˜ ë””í…Œì¼ë¡œ ë…¼ì˜í–ˆëŠ”ì§€
        ë¥¼ ì™„ì „íˆ ì¬êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ê³ ë°€ë„ ë¦¬í¬íŠ¸ ì‘ì„±

[ANALYSIS PRINCIPLES â€” ë°˜ë“œì‹œ ì¤€ìˆ˜]

1. ìš”ì•½(Summary) ê¸ˆì§€
   - "ì „ë°˜ì ìœ¼ë¡œ", "ìš”ì§€ëŠ”", "í•µì‹¬ì€"ê³¼ ê°™ì€ ì••ì¶• í‘œí˜„ ì‚¬ìš© ê¸ˆì§€
   - ì˜ë¯¸ë¥¼ ì¤„ì´ê±°ë‚˜ ì¶”ìƒí™”í•˜ì§€ ë§ ê²ƒ

2. í•´ì„(Interpretation) ìµœì†Œí™”
   - ë¶„ì„ê°€ëŠ” êµ¬ì¡°ë¥¼ ë³µì›í•˜ëŠ” ì—­í• ì„
   - í‰ê°€ëŠ” ì˜¤ì§ [Key Quotes & Implications] ì„¹ì…˜ì—ì„œë§Œ í—ˆìš©

3. ì˜ë¯¸ ë‹¨ìœ„ ê¸°ë°˜ ì¬êµ¬ì„±
   - ë¬¸ì¥ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ 'ì£¼ì¥â€“ê·¼ê±°â€“ì „ê°œ íë¦„' ë‹¨ìœ„ë¡œ êµ¬ì¡°í™”

4. ì •ë³´ ì†ì‹¤ ìµœì†Œí™”
   - ìˆ˜ì¹˜, ê³ ìœ ëª…ì‚¬, ê¸°ìˆ  ìš©ì–´, ì˜ˆì‹œ, ë¹„ìœ , ì „ì œ ì¡°ê±´ì„ ìƒëµí•˜ì§€ ë§ ê²ƒ

[LANGUAGE REQUIREMENT]
- ëª¨ë“  ì¶œë ¥ì€ **í•œêµ­ì–´ë¡œë§Œ** ì‘ì„±í•˜ì‹­ì‹œì˜¤
- ì „ë¬¸ ìš©ì–´ë‚˜ ê³ ìœ ëª…ì‚¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì˜ì–´ ì‚¬ìš©ì„ ì§€ì–‘í•˜ì‹­ì‹œì˜¤

[STEP 1. RAW INTELLIGENCE EXTRACTION â€” ì„ í–‰ ì‘ì—…]

ì•„ë˜ í•­ëª©ë“¤ì„ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹ ì§ì—†ì´ ì‹ë³„í•˜ë¼.
ì •ë¦¬í•˜ê±°ë‚˜ í‰ê°€í•˜ì§€ ë§ê³ , "ì¡´ì¬ ì—¬ë¶€ + ì‹¤ì œ ë“±ì¥ ë‚´ìš©"ë§Œ ì¶”ì¶œí•˜ë¼.

- ì–¸ê¸‰ëœ ìˆ˜ì¹˜ (ë¹„ìœ¨, ê¸ˆì•¡, ì„±ì¥ë¥ , íšŸìˆ˜, ê·œëª¨ ë“±)
- ê¸°ì—…ëª… / ê¸°ê´€ëª… / ì œí’ˆëª… / ì„œë¹„ìŠ¤ëª…
- ë‚ ì§œ / ê¸°ê°„ / íƒ€ì„ë¼ì¸ í‘œí˜„
- ì‹œì¥ ê·œëª¨ / ì‚°ì—… ì„±ì¥ë¥  / ìˆ˜ìš”Â·ê³µê¸‰ ê´€ë ¨ ìˆ˜ì¹˜
- ê¸°ìˆ ì  ìš©ì–´ / ê°œë… / í”„ë ˆì„ì›Œí¬
- ì •ì±… / ê·œì œ / ì œë„ ê´€ë ¨ ì–¸ê¸‰

â€» ì •ë³´ê°€ ì ë”ë¼ë„ "ì—†ìŒ"ì´ë¼ê³  ì“°ì§€ ë§ê³ ,
   ìŠ¤í¬ë¦½íŠ¸ì— ì‹¤ì œ ë“±ì¥í•œ í‘œí˜„ì„ ìµœëŒ€í•œ ë°˜ì˜í•  ê²ƒ.

(ì´ ë‹¨ê³„ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ëŠ” ì•„ë˜ ë¦¬í¬íŠ¸ì— ë°˜ì˜í•  ê²ƒ)

[OUTPUT REQUIREMENTS & FORMATTING]

## 1. ğŸ—ºï¸ Executive Hierarchy (ì „ì²´ ì¡°ë§)

- ì½˜í…ì¸  ì „ì²´ì˜ ë…¼ë¦¬ íë¦„ì„ ê´€í†µí•˜ëŠ” ëª©ì°¨ë¥¼ ë²ˆí˜¸(1, 2, 3â€¦)ë¡œ êµ¬ì„±í•  ê²ƒ
- ê° ì±•í„° ì œëª© ì˜†ì— í•´ë‹¹ ë…¼ì˜ë¥¼ ì£¼ë„í•œ **[ì£¼ìš” í™”ì]**ë¥¼ ëª…ì‹œí•  ê²ƒ
- ì±•í„°ëŠ” ë‹¨ìˆœ ì£¼ì œê°€ ì•„ë‹ˆë¼ 'ë…¼ì  ë‹¨ìœ„'ë¡œ êµ¬ì„±í•  ê²ƒ

ì˜ˆ:
1. AI ëª¨ë¸ ìŠ¤ì¼€ì¼ë§ì˜ í•œê³„ì™€ ì»´í“¨íŒ… ë³‘ëª© [í™”ì A]
2. ë°ì´í„° í’ˆì§ˆì´ ì„±ëŠ¥ ìƒí•œì„ ê²°ì •í•˜ëŠ” ì´ìœ  [í™”ì B]

## 2. ğŸ“ Deep-Dive Narrative (ìƒì„¸ ë¶„ì„) ***í•µì‹¬ ì„¹ì…˜***

*(ì´ ì„¹ì…˜ì€ ëŒ€ë³¸ í˜•ì‹ì´ ì•„ë‹Œ,
'3ì¸ì¹­ ê´€ì°°ì ì‹œì ì˜ ê°œì¡°ì‹ ì¸í…”ë¦¬ì „ìŠ¤ ë¦¬í¬íŠ¸'ë¡œ ì‘ì„±í•  ê²ƒ)*

**[ì‘ì„± ê·œì¹™]**

1. **ê°œì¡°ì‹ ì„œìˆ  (Strict Rule):**
   - ëª¨ë“  ë¬¸ì¥ì€ ëª…ì‚¬í˜•ìœ¼ë¡œ ì¢…ê²°í•  ê²ƒ
   - '~í–ˆë‹¤ / ~ì…ë‹ˆë‹¤' ì‚¬ìš© ê¸ˆì§€
   - í—ˆìš© ì˜ˆ: ~í•¨, ~ì„, ~ìœ¼ë¡œ íŒë‹¨ë¨, ~ë¼ê³  ê°•ì¡°í•¨, ~ì„ ì „ì œë¡œ ë…¼ì˜í•¨

2. **êµ¬ì¡° ê´€í†µí˜• ì„œìˆ  (Integrated Synthesis):**
   - 1ë²ˆ Executive Hierarchyì˜ ê° ì±•í„°ë¥¼ ê·¸ëŒ€ë¡œ ì†Œì£¼ì œë¡œ ì‚¬ìš©
   - ê° ì†Œì£¼ì œ ì•„ë˜ì—ì„œ:
     * ê´€ë ¨ ë°œì–¸ë“¤ì„ í™”ìë³„ë¡œ í†µí•©
     * ëŒ€ë³¸ ë‚˜ì—´ ê¸ˆì§€
     * ê° í™”ìì˜ ì£¼ì¥ê³¼ ë…¼ë¦¬ ì „ê°œë¥¼ ë¬¸ë‹¨ ë‹¨ìœ„ë¡œ ì¬êµ¬ì„±

3. **ê³ ë°€ë„ ì •ë³´ ê°•ì œ (High Density Enforcement):**
   - **ê° ì†Œì£¼ì œëŠ” í•´ë‹¹ ì†Œì£¼ì œ ì›ë¬¸ ë¶„ëŸ‰ì˜ ìµœì†Œ 15% ì´ìƒ**ìœ¼ë¡œ ì„œìˆ í•  ê²ƒ
   - ë‹¤ìŒ ìš”ì†Œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•  ê²ƒ:
     * ê³ ìœ ëª…ì‚¬
     * ìˆ˜ì¹˜
     * ê¸°ìˆ  ìš©ì–´
     * êµ¬ì²´ì  ì‚¬ë¡€
     * ì „ì œ ì¡°ê±´ ë˜ëŠ” í•œê³„ ì–¸ê¸‰
   - **í•µì‹¬ í‚¤ì›Œë“œëŠ” êµµê²Œ(Bold)** ì²˜ë¦¬

## 3. ğŸ’¬ Key Quotes & Implications (í•µì‹¬ ì¸ìš© ë° ì‹œì‚¬ì )

- í™”ìì˜ í•µì‹¬ í†µì°°ì´ ë‹´ê¸´ ë¬¸ì¥ì€ **í°ë”°ì˜´í‘œ("")ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ë¬¸ ì˜ë¯¸ë¥¼ ë³´ì¡´í•œ ìƒíƒœë¡œ ì¸ìš©**í•  ê²ƒ

í˜•ì‹:
> "ì¸ìš© ë¬¸ì¥" (**[í™”ì]**)
> â”” **Note:** í•´ë‹¹ ë°œì–¸ì´ ê°€ì§€ëŠ” ì „ëµì Â·ì‚°ì—…ì Â·íˆ¬ìì  í•¨ì˜ ë¶„ì„

â€» ì´ ì„¹ì…˜ì—ì„œë§Œ í•´ì„Â·í‰ê°€ í—ˆìš©

[STYLE GUIDELINES]
- í†¤ì•¤ë§¤ë„ˆ: C-Level ë° ì „ë¬¸ íˆ¬ììë¥¼ ìœ„í•œ ë³´ê³ ì„œì²´
- ì„œìˆ ì–´ ë°˜ë³µ ê¸ˆì§€ ('ë§í•¨' ëŒ€ì‹  'ê°•ì¡°í•¨ / ì „ì œí•¨ / ë°˜ë°•í•¨ / ì‹œì‚¬í•¨' ë“± ì‚¬ìš©)
- ì „ì²´ ê²°ê³¼ë¬¼ ë¶„ëŸ‰ì€ ì›ë¬¸ ìŠ¤í¬ë¦½íŠ¸ì˜ **ìµœì†Œ 15% ì´ˆê³¼** í•„ìˆ˜

[CONSTRAINTS]
- í™”ì í˜¼ë™ ê¸ˆì§€
- ë°œì–¸ ìˆœì„œ ì„ì˜ ë³€ê²½ ê¸ˆì§€
- ì›ë¬¸ì— ì—†ëŠ” ì£¼ì¥ ìƒì„± ê¸ˆì§€
- í‰ê°€Â·íŒë‹¨ì„ í™”ì ë°œì–¸ì²˜ëŸ¼ ì„œìˆ  ê¸ˆì§€ (Key Quotes ì„¹ì…˜ ì œì™¸)

* ìƒì„¸ ìš”ì•½ë¬¸ì„ ëê¹Œì§€ ì¶œë ¥í•œ í›„ ë§¨ ë’¤ì—ëŠ” "(Summarized from Youtube)"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶”ê°€í•˜ì‹œì˜¤

==========
[TARGET SCRIPT]
{transcript}"""

    # ë°œí‘œí˜• Detail í”„ë¡¬í”„íŠ¸
    BASE_DETAIL_PRESENTATION = """[ROLE]
{role}

[INPUT DATA]
- ë¶„ì„ ëŒ€ìƒ: ì œê³µëœ ê°•ì—° / ë°œí‘œ / ì„¸ë¯¸ë‚˜ ìŠ¤í¬ë¦½íŠ¸
- ëª©í‘œ: ë…ìê°€ ì˜ìƒì„ ì‹œì²­í•˜ì§€ ì•Šì•„ë„
        â–¸ ë°œí‘œìê°€
        â–¸ ì–´ë–¤ ì£¼ì œë¥¼
        â–¸ ì–´ë–¤ ë…¼ë¦¬ì™€ ê·¼ê±°ë¡œ
        â–¸ ì–´ë–¤ ìˆ˜ì¤€ì˜ ë””í…Œì¼ë¡œ ì „ê°œí–ˆëŠ”ì§€
        ë¥¼ ì™„ì „íˆ ì¬êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ê³ ë°€ë„ ë¦¬í¬íŠ¸ ì‘ì„±

[ANALYSIS PRINCIPLES â€” ë°˜ë“œì‹œ ì¤€ìˆ˜]

1. ìš”ì•½(Summary) ê¸ˆì§€
   - "ì „ë°˜ì ìœ¼ë¡œ", "ìš”ì§€ëŠ”", "í•µì‹¬ì€"ê³¼ ê°™ì€ ì••ì¶• í‘œí˜„ ì‚¬ìš© ê¸ˆì§€
   - ì˜ë¯¸ë¥¼ ì¤„ì´ê±°ë‚˜ ì¶”ìƒí™”í•˜ì§€ ë§ ê²ƒ

2. í•´ì„(Interpretation) ìµœì†Œí™”
   - ë¶„ì„ê°€ëŠ” êµ¬ì¡°ë¥¼ ë³µì›í•˜ëŠ” ì—­í• ì„
   - í‰ê°€ëŠ” ì˜¤ì§ [Key Quotes & Implications] ì„¹ì…˜ì—ì„œë§Œ í—ˆìš©

3. ì˜ë¯¸ ë‹¨ìœ„ ê¸°ë°˜ ì¬êµ¬ì„±
   - ë¬¸ì¥ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ 'ì£¼ì¥â€“ê·¼ê±°â€“ì „ê°œ íë¦„' ë‹¨ìœ„ë¡œ êµ¬ì¡°í™”

4. ì •ë³´ ì†ì‹¤ ìµœì†Œí™”
   - ìˆ˜ì¹˜, ê³ ìœ ëª…ì‚¬, ê¸°ìˆ  ìš©ì–´, ì˜ˆì‹œ, ë¹„ìœ , ì „ì œ ì¡°ê±´ì„ ìƒëµí•˜ì§€ ë§ ê²ƒ

[LANGUAGE REQUIREMENT]
- ëª¨ë“  ì¶œë ¥ì€ **í•œêµ­ì–´ë¡œë§Œ** ì‘ì„±í•˜ì‹­ì‹œì˜¤
- ì „ë¬¸ ìš©ì–´ë‚˜ ê³ ìœ ëª…ì‚¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì˜ì–´ ì‚¬ìš©ì„ ì§€ì–‘í•˜ì‹­ì‹œì˜¤

[STEP 1. RAW INTELLIGENCE EXTRACTION â€” ì„ í–‰ ì‘ì—…]

ì•„ë˜ í•­ëª©ë“¤ì„ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹ ì§ì—†ì´ ì‹ë³„í•˜ë¼.
ì •ë¦¬í•˜ê±°ë‚˜ í‰ê°€í•˜ì§€ ë§ê³ , "ì¡´ì¬ ì—¬ë¶€ + ì‹¤ì œ ë“±ì¥ ë‚´ìš©"ë§Œ ì¶”ì¶œí•˜ë¼.

- ì–¸ê¸‰ëœ ìˆ˜ì¹˜ (ë¹„ìœ¨, ê¸ˆì•¡, ì„±ì¥ë¥ , íšŸìˆ˜, ê·œëª¨ ë“±)
- ê¸°ì—…ëª… / ê¸°ê´€ëª… / ì œí’ˆëª… / ì„œë¹„ìŠ¤ëª…
- ë‚ ì§œ / ê¸°ê°„ / íƒ€ì„ë¼ì¸ í‘œí˜„
- ì‹œì¥ ê·œëª¨ / ì‚°ì—… ì„±ì¥ë¥  / ìˆ˜ìš”Â·ê³µê¸‰ ê´€ë ¨ ìˆ˜ì¹˜
- ê¸°ìˆ ì  ìš©ì–´ / ê°œë… / í”„ë ˆì„ì›Œí¬
- ì •ì±… / ê·œì œ / ì œë„ ê´€ë ¨ ì–¸ê¸‰

â€» ì •ë³´ê°€ ì ë”ë¼ë„ "ì—†ìŒ"ì´ë¼ê³  ì“°ì§€ ë§ê³ ,
   ìŠ¤í¬ë¦½íŠ¸ì— ì‹¤ì œ ë“±ì¥í•œ í‘œí˜„ì„ ìµœëŒ€í•œ ë°˜ì˜í•  ê²ƒ.

(ì´ ë‹¨ê³„ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ëŠ” ì•„ë˜ ë¦¬í¬íŠ¸ì— ë°˜ì˜í•  ê²ƒ)

[OUTPUT REQUIREMENTS & FORMATTING]

## 1. ğŸ—ºï¸ Presentation Structure (ë°œí‘œ êµ¬ì¡°)

- ë°œí‘œ ì „ì²´ì˜ ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ ê´€í†µí•˜ëŠ” ëª©ì°¨ë¥¼ ë²ˆí˜¸(1, 2, 3â€¦)ë¡œ êµ¬ì„±í•  ê²ƒ
- ê° ì±•í„°ëŠ” ë°œí‘œì˜ í•µì‹¬ ë…¼ì ì´ë‚˜ ë©”ì‹œì§€ë¥¼ ëª…í™•íˆ í‘œí˜„
- ì±•í„°ëŠ” ë‹¨ìˆœ ì£¼ì œê°€ ì•„ë‹ˆë¼ 'ë…¼ì  ë‹¨ìœ„'ë¡œ êµ¬ì„±í•  ê²ƒ

ì˜ˆ:
1. í˜„ì¬ ì‹œì¥ì˜ êµ¬ì¡°ì  í•œê³„ì™€ ë¬¸ì œ ì •ì˜
2. ì œì•ˆí•˜ëŠ” ì†”ë£¨ì…˜ì˜ ê¸°ìˆ ì  ì ‘ê·¼ê³¼ ì°¨ë³„ì 

## 2. ğŸ“ Content Deep-Dive (ë‚´ìš© ì‹¬ì¸µ ë¶„ì„) ***í•µì‹¬ ì„¹ì…˜***

*(ì´ ì„¹ì…˜ì€ ê°•ì—° í•„ê¸°ê°€ ì•„ë‹Œ,
'3ì¸ì¹­ ê´€ì°°ì ì‹œì ì˜ ê°œì¡°ì‹ ì¸í…”ë¦¬ì „ìŠ¤ ë¦¬í¬íŠ¸'ë¡œ ì‘ì„±í•  ê²ƒ)*

**[ì‘ì„± ê·œì¹™]**

1. **ê°œì¡°ì‹ ì„œìˆ  (Strict Rule):**
   - ëª¨ë“  ë¬¸ì¥ì€ ëª…ì‚¬í˜•ìœ¼ë¡œ ì¢…ê²°í•  ê²ƒ
   - '~í–ˆë‹¤ / ~ì…ë‹ˆë‹¤' ì‚¬ìš© ê¸ˆì§€
   - í—ˆìš© ì˜ˆ: ~í•¨, ~ì„, ~ìœ¼ë¡œ íŒë‹¨ë¨, ~ë¼ê³  ì œì‹œí•¨, ~ì„ ì „ì œë¡œ ë…¼ì˜í•¨

2. **êµ¬ì¡° ê´€í†µí˜• ì„œìˆ  (Integrated Synthesis):**
   - 1ë²ˆ Presentation Structureì˜ ê° ì±•í„°ë¥¼ ê·¸ëŒ€ë¡œ ì†Œì£¼ì œë¡œ ì‚¬ìš©
   - ê° ì†Œì£¼ì œ ì•„ë˜ì—ì„œ:
     * ë°œí‘œ ë‚´ìš©ì„ ë…¼ë¦¬ íë¦„ì— ë”°ë¼ ì¬êµ¬ì„±
     * ë‹¨ìˆœ ë‚˜ì—´ ê¸ˆì§€
     * ë°œí‘œìì˜ ì£¼ì¥ê³¼ ë…¼ë¦¬ ì „ê°œë¥¼ ë¬¸ë‹¨ ë‹¨ìœ„ë¡œ êµ¬ì¡°í™”

3. **ê³ ë°€ë„ ì •ë³´ ê°•ì œ (High Density Enforcement):**
   - **ê° ì†Œì£¼ì œëŠ” í•´ë‹¹ ì†Œì£¼ì œ ì›ë¬¸ ë¶„ëŸ‰ì˜ ìµœì†Œ 15% ì´ìƒ**ìœ¼ë¡œ ì„œìˆ í•  ê²ƒ
   - ë‹¤ìŒ ìš”ì†Œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•  ê²ƒ:
     * ê³ ìœ ëª…ì‚¬
     * ìˆ˜ì¹˜
     * ê¸°ìˆ  ìš©ì–´
     * êµ¬ì²´ì  ì‚¬ë¡€
     * ì „ì œ ì¡°ê±´ ë˜ëŠ” í•œê³„ ì–¸ê¸‰
   - **í•µì‹¬ í‚¤ì›Œë“œëŠ” êµµê²Œ(Bold)** ì²˜ë¦¬

## 3. ğŸ’¬ Key Messages & Implications (í•µì‹¬ ë©”ì‹œì§€ ë° ì‹œì‚¬ì )

- ë°œí‘œìì˜ í•µì‹¬ í†µì°°ì´ ë‹´ê¸´ ë¬¸ì¥ì€ **í°ë”°ì˜´í‘œ("")ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ë¬¸ ì˜ë¯¸ë¥¼ ë³´ì¡´í•œ ìƒíƒœë¡œ ì¸ìš©**í•  ê²ƒ

í˜•ì‹:
> "ì¸ìš© ë¬¸ì¥" (**[ë°œí‘œì]**)
> â”” **Note:** í•´ë‹¹ ë©”ì‹œì§€ê°€ ê°€ì§€ëŠ” ì „ëµì Â·ì‚°ì—…ì Â·íˆ¬ìì  í•¨ì˜ ë¶„ì„

â€» ì´ ì„¹ì…˜ì—ì„œë§Œ í•´ì„Â·í‰ê°€ í—ˆìš©

[STYLE GUIDELINES]
- í†¤ì•¤ë§¤ë„ˆ: C-Level ë° ì „ë¬¸ íˆ¬ììë¥¼ ìœ„í•œ ë³´ê³ ì„œì²´
- ì„œìˆ ì–´ ë°˜ë³µ ê¸ˆì§€ ('ë§í•¨' ëŒ€ì‹  'ì œì‹œí•¨ / ê°•ì¡°í•¨ / ë…¼ì¦í•¨ / ì‹œì‚¬í•¨' ë“± ì‚¬ìš©)
- ì „ì²´ ê²°ê³¼ë¬¼ ë¶„ëŸ‰ì€ ì›ë¬¸ ìŠ¤í¬ë¦½íŠ¸ì˜ **ìµœì†Œ 15% ì´ˆê³¼** í•„ìˆ˜

[CONSTRAINTS]
- ì‹œê°„ ìˆœ ë‹¨ìˆœ ë‚˜ì—´ ê¸ˆì§€
- ë…¼ë¦¬ì  ì—°ê²° ì—†ì´ ë‚´ìš© ë‚˜ì—´ ê¸ˆì§€
- ì›ë¬¸ì— ì—†ëŠ” ì£¼ì¥/í•´ì„ ì¶”ê°€ ê¸ˆì§€ (Key Messages ì„¹ì…˜ ì œì™¸)
- ê²°ë¡ ì„ ì•ë‹¹ê²¨ ì™œê³¡ ê¸ˆì§€

* ìƒì„¸ ìš”ì•½ë¬¸ì„ ëê¹Œì§€ ì¶œë ¥í•œ í›„ ë§¨ ë’¤ì—ëŠ” "(Summarized from Youtube)"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶”ê°€í•˜ì‹œì˜¤

==========
[TARGET SCRIPT]
{transcript}"""

    def create_prompt(self, topic: str, format_type: str, transcript: str, prompt_type: str = "detail") -> str:
        """
        ë‹¨ìˆœí™”ëœ í”„ë¡¬í”„íŠ¸ ìƒì„±
        
        Args:
            topic: ì£¼ì œ (general, tech, business, ai, economy, politics, daily)
            format_type: í˜•ì‹ (dialogue, presentation)
            transcript: ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸
            prompt_type: í”„ë¡¬í”„íŠ¸ ìœ í˜• (overview ë˜ëŠ” detail)
        
        Returns:
            ì™„ì„±ëœ í”„ë¡¬í”„íŠ¸
        """
        # ì „ë¬¸ ë¶„ì•¼ ì„ íƒ (ê¸°ë³¸ê°’: general)
        specialty = self.specialty_roles.get(topic, self.specialty_roles["general"])
        
        # ê³µí†µ ROLE + ì „ë¬¸ ë¶„ì•¼ ê²°í•©
        combined_role = f"{self.base_role}\n\nì „ë¬¸ ë¶„ì•¼: {specialty}"
        
        if prompt_type == "overview":
            # OverviewëŠ” í•­ìƒ ë™ì¼í•œ í…œí”Œë¦¿ ì‚¬ìš©
            return self.BASE_OVERVIEW.format(role=combined_role, transcript=transcript)
        else:
            # Detailì€ format_typeì— ë”°ë¼ í…œí”Œë¦¿ ì„ íƒ
            if format_type == "presentation":
                template = self.BASE_DETAIL_PRESENTATION
            else:  # dialogue ë˜ëŠ” ê¸°ë³¸ê°’
                template = self.BASE_DETAIL_DIALOGUE
            
            return template.format(role=combined_role, transcript=transcript)


def get_modular_prompt(topic: str, format_type: str, transcript: str, prompt_type: str = "detail") -> str:
    """
    PromptGeneratorë¥¼ ì‚¬ìš©í•œ ëª¨ë“ˆí˜• í”„ë¡¬í”„íŠ¸ ìƒì„±
    
    Args:
        topic: ì£¼ì œ ì¹´í…Œê³ ë¦¬
        format_type: í˜•ì‹ ìœ í˜• (dialogue ë˜ëŠ” presentation)
        transcript: ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸
        prompt_type: í”„ë¡¬í”„íŠ¸ ìœ í˜• (overview ë˜ëŠ” detail)
    
    Returns:
        ìƒì„±ëœ í”„ë¡¬í”„íŠ¸
    """
    generator = PromptGenerator()
    return generator.create_prompt(topic, format_type, transcript, prompt_type)


def get_all_categories() -> List[Dict[str, str]]:
    """
    ëª¨ë“  ì£¼ì œ ì¹´í…Œê³ ë¦¬ ì •ë³´ ë°˜í™˜
    
    Returns:
        ì¹´í…Œê³ ë¦¬ ì •ë³´ ë¦¬ìŠ¤íŠ¸
    """
    generator = PromptGenerator()
    
    # Display names for each specialty
    display_names = {
        "general": "ê¸°ë³¸",
        "default": "ê¸°ë³¸",
        "tech": "í…Œí¬",
        "business": "ë¹„ì¦ˆë‹ˆìŠ¤",
        "ai": "ì¸ê³µì§€ëŠ¥",
        "economy": "ê²½ì œ",
        "politics": "ì •ì¹˜ì‚¬íšŒ",
        "daily": "ì¼ìƒ"
    }
    
    descriptions = {
        "general": "ë²”ìš© ëŒ€ë‹´/ì¸í„°ë·° ì»¨í…ì¸ ",
        "default": "ë²”ìš© ëŒ€ë‹´/ì¸í„°ë·° ì»¨í…ì¸ ",
        "tech": "IT, ì†Œí”„íŠ¸ì›¨ì–´, í•˜ë“œì›¨ì–´ ë“± ê¸°ìˆ  ê´€ë ¨",
        "business": "ê²½ì˜, ë§ˆì¼€íŒ…, ì „ëµ ë“± ë¹„ì¦ˆë‹ˆìŠ¤",
        "ai": "AI, ë¨¸ì‹ ëŸ¬ë‹, ë”¥ëŸ¬ë‹ ë“± ì¸ê³µì§€ëŠ¥",
        "economy": "ê²½ì œ, ê¸ˆìœµ, íˆ¬ì ë“±",
        "politics": "ì •ì¹˜, ì‚¬íšŒ, êµ­ì œê´€ê³„ ë“±",
        "daily": "ë¸Œì´ë¡œê·¸, ì¼ìƒ, ì—¬í–‰ ë“±"
    }
    
    return [
        {
            "category": category,
            "display_name": display_names.get(category, category),
            "description": descriptions.get(category, "")
        }
        for category in generator.specialty_roles.keys()
        if category != "default"  # defaultëŠ” generalê³¼ ì¤‘ë³µì´ë¯€ë¡œ ì œì™¸
    ]
